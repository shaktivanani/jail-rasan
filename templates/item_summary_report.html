{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <div class="card shadow">
        <div class="card-header bg-primary text-white py-3">
            <div class="d-flex justify-content-between align-items-center">
                <h2 class="h5 mb-0">Stock Summary for {{ stock_item.item_name }}</h2>
                <a href="{{ url_for('item_summary') }}" class="btn btn-light btn-sm">
                    <i class="bi bi-arrow-left me-1"></i> New Report
                </a>
            </div>
            <div class="mt-2">
                <small class="text-white-50">
                    {{ start_date.strftime('%Y-%m-%d') }} to {{ end_date.strftime('%Y-%m-%d') }}
                </small>
            </div>
        </div>
        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table table-hover align-middle mb-0">
                    <thead class="table-light">
                        <tr>
                            <th class="ps-3">Date</th>
                            <th>Day</th>
                            <th>Opening</th>
                            <th>Income</th>
                            <th>Total Stock</th>
                            <th>Kedi Total</th>
                            <th>Scale</th>
                            <th>Used</th>
                            <th>Closing</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for data in report_data %}
                        <tr>
                            <td class="ps-3">{{ data.date.strftime('%Y-%m-%d') }}</td>
                            <td>{{ data.day_name }}</td>
                            <td>{{ "%.2f"|format(data.opening) }}</td>
                            <td>{{ "%.2f"|format(data.income) }}</td>
                            <td>{{ "%.2f"|format(data.total_stock) }}</td>
                            <td>{{ data.kedi_total }}</td>
                            <td>{{ "%.4f"|format(data.scale_value) }}</td>
                            <td>{{ "%.2f"|format(data.used_stock) }}</td>
                            <td class="fw-bold">{{ "%.2f"|format(data.closing) }}</td>
                        </tr>
                        {% else %}
                        <tr>
                            <td colspan="9" class="text-center py-4 text-muted">
                                No data available for selected period
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
        <div class="card-footer text-end">
            <a href="#" class="btn btn-outline-primary" onclick="window.print()">
                <i class="bi bi-printer me-2"></i>Print Report
            </a>
        </div>
    </div>
</div>
{% endblock %}